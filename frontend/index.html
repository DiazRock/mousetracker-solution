<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket Example</title>
    </head>
    <body>
        <h1>
            WebSocket Mouse Position
        </h1>
        <div id="events">
        </div>
        <script lang="js" src="main.js">
            const ws = new WebSocket("ws://" + location.host + "/ws");
            console.log("Connection done!");
        
            ws.onmessage = function(event) {
                console.log("Having a message");
                const eventDiv = document.getElementById('events');
                const data = JSON.parse(event.data);
                if (data.type === 'move') {
                    console.log("Movement message");
                    eventDiv.innerHTML = 'Mouse moved to (' + data.x + ', ' + data.y + ')';
                } else if (data.type === 'click') {
                    console.log("Click message");
                    const action = data.pressed ? 'pressed' : 'released';
                    eventDiv.innerHTML = 'Mouse ' + data.button + ' ' + action + ' at (' + data.x + ', ' + data.y + ')';
                } else if (data.type === 'scroll') {
                    eventDiv.innerHTML = 'Mouse scrolled at (' + data.x + ', ' + data.y + ') with delta (' + data.dx + ', ' + data.dy + ')';
                }
            };
        </script>
    </body>
</html>